<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/xhtml;charset=UTF-8" http-equiv="Content-Type" /><meta content="IE=9" http-equiv="X-UA-Compatible" /><meta content="Doxygen 1.8.3.1" name="generator" /><title>_i_m2_m_message_listener_1_1_private_data</title><link href="tabs.css" rel="stylesheet" type="text/css" /><script src="jquery.js" type="text/javascript"></script><script src="dynsections.js" type="text/javascript"></script><link href="navtree.css" rel="stylesheet" type="text/css" /><script src="resize.js" type="text/javascript"></script><script src="navtree.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(initResizable);

  $(window).load(resizeHeight);

</script><link href="search/search.css" rel="stylesheet" type="text/css" /><script src="search/search.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(function() { searchBox.OnSelectItem(0); });

</script><link href="doxygen.css" rel="stylesheet" type="text/css" /></head><body><div id="top"><div id="titlearea"><table cellpadding="0" cellspacing="0"><tbody><tr style="height: 56px;"><td id="projectlogo"><img alt="Logo" src="adobe_logo.png" /></td><td style="padding-left: 0.5em;"><div id="projectname">InDesign SDK &nbsp;<span id="projectnumber">14.0.0</span></div></td></tr></tbody></table></div><script type="text/javascript">

var searchBox = new SearchBox("searchBox", "search",false,'Search');

</script><div class="tabs" id="navrow1"><ul class="tablist"><li><a href="index.html"><span>InDesign&nbsp;SDK</span></a><li><a href="pages.html"><span>Documentation</span></a><li><a href="group__bosses__parent.html"><span>Bosses</span></a><li><a href="group__sdk.html"><span>Sample&nbsp;plug-ins</span></a><li><a href="classes.html"><span>Class&nbsp;Index</span></a><li><div class="MSearchBoxInactive" id="MSearchBox"><span class="left"> <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png" /> <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search" /> </span><span class="right"> <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png" /></a> </span></div></ul></div></div><div class="ui-resizable side-nav-resizable" id="side-nav"><div id="nav-tree"><div id="nav-tree-contents"><div class="sync" id="nav-sync"></div></div></div><div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;"></div></div><script type="text/javascript">

$(document).ready(function(){initNavTree('class_i_m2_m_message_listener_1_1_private_data.html','');});

</script><div id="doc-content"><div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()"><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Pages</a></div><div id="MSearchResultsWindow"><iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)"></iframe></div><div class="header"><div class="summary"><a href="#nested-classes">Classes</a> | <a href="#pub-methods">Public Member Functions</a> | <a href="class_i_m2_m_message_listener_1_1_private_data-members.html">List of all members</a></div><div class="headertitle"><div class="title">IM2MMessageListener::PrivateData Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div></div><div class="contents"><p><code>#include &lt;<a class="el" href="_i_m2_m_message_listener_8h_source.html">IM2MMessageListener.h</a>&gt;</code><div class="dynheader"> Inheritance diagram for IM2MMessageListener::PrivateData:</div><div class="dyncontent"><div class="center"><img alt="" src="class_i_m2_m_message_listener_1_1_private_data.png" usemap="#IM2MMessageListener::PrivateData_map" /><map id="IM2MMessageListener::PrivateData_map" name="IM2MMessageListener::PrivateData_map"><area alt="CM2MMessageListener::myPrivateData" coords="0,56,234,80" href="class_c_m2_m_message_listener_1_1my_private_data.html" shape="rect" /></map></div></div><table class="memberdecls"><tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a> Classes</h2></td></tr><tr class="memitem:"><td align="right" class="memItemLeft" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m2_m_message_listener_1_1_private_data_1_1_validate_helper.html">ValidateHelper</a></td></tr><tr class="separator:"><td class="memSeparator" colspan="2">&nbsp;</td></tr></table><table class="memberdecls"><tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a> Public Member Functions</h2></td></tr><tr class="memitem:aa74699afe6e1825cc8cc3df790618e31"><td align="right" class="memItemLeft" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#aa74699afe6e1825cc8cc3df790618e31">~PrivateData</a> ()</td></tr><tr class="separator:aa74699afe6e1825cc8cc3df790618e31"><td class="memSeparator" colspan="2">&nbsp;</td></tr><tr class="memitem:a568b271423bf281e1fff7ac559f53182"><td align="right" class="memItemLeft" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a568b271423bf281e1fff7ac559f53182">SnapshotReadWrite</a> (<a class="el" href="class_i_p_m_stream.html">IPMStream</a> *stream)=0</td></tr><tr class="separator:a568b271423bf281e1fff7ac559f53182"><td class="memSeparator" colspan="2">&nbsp;</td></tr><tr class="memitem:a62d935dade3f22ff6fcccf2a3844d96c"><td align="right" class="memItemLeft" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate</a> (<a class="el" href="class_i_m2_m_message_listener_1_1_private_data_1_1_validate_helper.html">ValidateHelper</a> &amp;helper)=0</td></tr><tr class="separator:a62d935dade3f22ff6fcccf2a3844d96c"><td class="memSeparator" colspan="2">&nbsp;</td></tr><tr class="memitem:a5a06265251848f8cdbf658ed7a71dc3e"><td align="right" class="memItemLeft" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a5a06265251848f8cdbf658ed7a71dc3e">Abandon</a> (bool16 wasValidated)=0</td></tr><tr class="separator:a5a06265251848f8cdbf658ed7a71dc3e"><td class="memSeparator" colspan="2">&nbsp;</td></tr></table><a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2><div class="textblock"><p><a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> is the key to harnessing the full power of the Model to Model Messaging because it allows the Listener to store away the pre-change state of implementations that is is listening to and defer action until after the original top level command which started the &#39;transaction&#39; is complete at which time in a call to <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate()</a> it can compare the current state of the implementations to the saved pre-change state and determine what really changed.<p>When the call to <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate()</a> occurs it is free to react to this change by firing commands and thus starting another round of &#39;transactions&#39;.<p>Although created by the Listener (see <a class="el" href="class_i_m2_m_message_listener_1_1_message_helper.html#a64357ce4c4da568625a813a432667518">MessageHelper::AddPrivateData()</a>), the lifetime of it is controlled by M2MMessageManager and it will be deleted at will by it without any guarantee of a call to <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate()</a>.<p>Thus the <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> must be snapshot if it is changed in any way during calls to <a class="el" href="class_i_m2_m_message_listener.html#a22945924c3202b00b0850a8cf8954007">Message()</a>. Because of this, it is recommended that implementations only store the minimum data, typically pre-change state, and leave the determination of what to do until the call to <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate()</a>.<p>Note that the <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> does not need to do any sort of call to PreDirty() because the M2MMessageManager, which controls the process, will always be dirtied by any message, duplicate or not.<p>Implementations which wish to use <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> are strongly encouraged to consider using the baseclass <a class="el" href="class_c_m2_m_message_listener.html">CM2MMessageListener</a> as it will simplify their code and further allow a single Listener to manage sub-listeners. </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2><a class="anchor" id="aa74699afe6e1825cc8cc3df790618e31"></a><div class="memitem"><div class="memproto"><table class="mlabels"><tr><td class="mlabels-left"><table class="memname"><tr><td class="memname">virtual IM2MMessageListener::PrivateData::~PrivateData </td><td>(</td><td class="paramname"></td><td>)</td><td></td></tr></table></td><td class="mlabels-right"><span class="mlabels"><span class="mlabel">virtual</span></span></td></tr></table></div><div class="memdoc"><p>Destructor for <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a>. It is not guaranteed that the <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> will be validated OR aborted before it is destructed. Further, the context of destruction is not always in a valid context for the callee to access other parts of the document.<p>As a result the callee must not do anything other then free its own internal resources without causing any side effects to the document. </div></div><h2 class="groupheader">Member Function Documentation</h2><a class="anchor" id="a5a06265251848f8cdbf658ed7a71dc3e"></a><div class="memitem"><div class="memproto"><table class="mlabels"><tr><td class="mlabels-left"><table class="memname"><tr><td class="memname">virtual void IM2MMessageListener::PrivateData::Abandon </td><td>(</td><td class="paramtype">bool16&nbsp;</td><td class="paramname"><em>wasValidated</em></td><td>)</td><td></td></tr></table></td><td class="mlabels-right"><span class="mlabels"><span class="mlabel">pure virtual</span></span></td></tr></table></div><div class="memdoc"><p>This method will be called when the transaction the <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> is part of will not be completed. The calling context is either at the end of the undo processing where the rollback has already occured OR it can be before it is happened as a result of the M2MMessageManager seeing that the global error state has been set. Further, it is possible that the callee may have already been called in <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate()</a>.<p>Most implementations need not worry about doing anything in this method unless they are trying to sychronize between external state.<p>Consider the case where a implementation in its constructor sends a standard ModelChange() message to some external listener to mute some activity related to the changing model state. At the call to <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate()</a> it then sends a lazy broadcast message to both unmute the activity and provide information describing the change that occured.<p>If the <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate()</a> is never called because the transaction is rolled back the <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> needs to ensure that it still sends an unmute message. Likewise if the validation of some other <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> causes the global error state to be set then we know that the transaction WILL be rolled back and the scheduled lazy broadcast will NOT be set and the external state not unmuted. <dl class="params"><dt>Parameters<dd><table class="params"><tr><td class="paramname">wasValidated</td><td>kTrue if <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html#a62d935dade3f22ff6fcccf2a3844d96c">Validate()</a> was called on the <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a></td></tr></table></dl><p>Implemented in <a class="el" href="class_c_m2_m_message_listener_1_1my_private_data.html#a7a3028f0616e9983d0fd51ba4352da95">CM2MMessageListener::myPrivateData</a>.</div></div><a class="anchor" id="a568b271423bf281e1fff7ac559f53182"></a><div class="memitem"><div class="memproto"><table class="mlabels"><tr><td class="mlabels-left"><table class="memname"><tr><td class="memname">virtual void IM2MMessageListener::PrivateData::SnapshotReadWrite </td><td>(</td><td class="paramtype"><a class="el" href="class_i_p_m_stream.html">IPMStream</a> *&nbsp;</td><td class="paramname"><em>stream</em></td><td>)</td><td></td></tr></table></td><td class="mlabels-right"><span class="mlabels"><span class="mlabel">pure virtual</span></span></td></tr></table></div><div class="memdoc"><p>The <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> is called to snapshot changes that have been made to the <a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a> since it was constructed. Implementation which do not change themselves during calls to <a class="el" href="class_i_m2_m_message_listener.html#a22945924c3202b00b0850a8cf8954007">Message()</a> are free to do nothing during this call. <dl class="params"><dt>Parameters<dd><table class="params"><tr><td class="paramname">stream</td><td>Pointer to <a class="el" href="class_i_p_m_stream.html">IPMStream</a> input/output stream </td></tr></table></dl><p>Implemented in <a class="el" href="class_c_m2_m_message_listener_1_1my_private_data.html#ac80705bc904eb8254402294c2bd6c47f">CM2MMessageListener::myPrivateData</a>.</div></div><a class="anchor" id="a62d935dade3f22ff6fcccf2a3844d96c"></a><div class="memitem"><div class="memproto"><table class="mlabels"><tr><td class="mlabels-left"><table class="memname"><tr><td class="memname">virtual void IM2MMessageListener::PrivateData::Validate </td><td>(</td><td class="paramtype"><a class="el" href="class_i_m2_m_message_listener_1_1_private_data_1_1_validate_helper.html">ValidateHelper</a> &amp;&nbsp;</td><td class="paramname"><em>helper</em></td><td>)</td><td></td></tr></table></td><td class="mlabels-right"><span class="mlabels"><span class="mlabel">pure virtual</span></span></td></tr></table></div><div class="memdoc"><p>Post-notification to Listeners which have registered private data. <dl class="params"><dt>Parameters<dd><table class="params"><tr><td class="paramname">helper</td><td>Reference to <a class="el" href="class_i_m2_m_message_listener_1_1_private_data_1_1_validate_helper.html">ValidateHelper</a> class. </td></tr></table></dl></div></div></div></div><div class="navpath" id="nav-path"><ul><li class="navelem"><a class="el" href="class_i_m2_m_message_listener.html">IM2MMessageListener</a><li class="navelem"><a class="el" href="class_i_m2_m_message_listener_1_1_private_data.html">PrivateData</a><li class="footer">Generated on Sat Sep 22 2018 10:54:20 for InDesign SDK by <a href="http://www.doxygen.org/index.html"> <img alt="doxygen" class="footer" src="doxygen.png" /></a> 1.8.3.1 </ul></div></body></html>
