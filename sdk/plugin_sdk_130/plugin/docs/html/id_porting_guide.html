<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/xhtml;charset=UTF-8" http-equiv="Content-Type" /><meta content="IE=9" http-equiv="X-UA-Compatible" /><meta content="Doxygen 1.8.3.1" name="generator" /><title>id_porting_guide</title><link href="tabs.css" rel="stylesheet" type="text/css" /><script src="jquery.js" type="text/javascript"></script><script src="dynsections.js" type="text/javascript"></script><link href="navtree.css" rel="stylesheet" type="text/css" /><script src="resize.js" type="text/javascript"></script><script src="navtree.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(initResizable);

  $(window).load(resizeHeight);

</script><link href="search/search.css" rel="stylesheet" type="text/css" /><script src="search/search.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(function() { searchBox.OnSelectItem(0); });

</script><link href="doxygen.css" rel="stylesheet" type="text/css" /></head><body><div id="top"><div id="titlearea"><table cellpadding="0" cellspacing="0"><tbody><tr style="height: 56px;"><td id="projectlogo"><img alt="Logo" src="adobe_logo.png" /></td><td style="padding-left: 0.5em;"><div id="projectname">InDesign SDK &nbsp;<span id="projectnumber">14.0.0</span></div></td></tr></tbody></table></div><script type="text/javascript">

var searchBox = new SearchBox("searchBox", "search",false,'Search');

</script><div class="tabs" id="navrow1"><ul class="tablist"><li><a href="index.html"><span>InDesign&nbsp;SDK</span></a><li class="current"><a href="pages.html"><span>Documentation</span></a><li><a href="group__bosses__parent.html"><span>Bosses</span></a><li><a href="group__sdk.html"><span>Sample&nbsp;plug-ins</span></a><li><a href="classes.html"><span>Class&nbsp;Index</span></a><li><div class="MSearchBoxInactive" id="MSearchBox"><span class="left"> <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png" /> <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search" /> </span><span class="right"> <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png" /></a> </span></div></ul></div></div><div class="ui-resizable side-nav-resizable" id="side-nav"><div id="nav-tree"><div id="nav-tree-contents"><div class="sync" id="nav-sync"></div></div></div><div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;"></div></div><script type="text/javascript">

$(document).ready(function(){initNavTree('id_porting_guide.html','');});

</script><div id="doc-content"><div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()"><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Pages</a></div><div id="MSearchResultsWindow"><iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)"></iframe></div><div class="header"><div class="headertitle"><div class="title">Porting Guide </div></div></div><div class="contents"><div class="textblock"><h1><a class="anchor" id="id_whats_new_in_the_indesign_cc_plugin_sdk"></a> What&#39;s New in the InDesign Plug-In SDK</h1><h2><a class="anchor" id="id_xcode_deployment_target"></a> Xcode base SDK and deployment target</h2><p>InDesign now uses MacOSX10.13.sdk as the Base SDK, OSX 10.11 as the OS X Deployment Target, GNU C++-14 as the C++ Language Dialect and libc++.dylib as the C++ Standard Library for Xcode projects. If your projects doesn&#39;t use the SDK shared Xcode setting files you will need to update these settings manually.<p><b>Other project changes to note</b><ol type="1"><li>In common.xcconfig, CLANG_CXX_LANGUAGE_STANDARD has been set to gnu++14 i.e. the code is compiled as GNU C++-14 compliant.<li>BOOST_SPIRIT_THREADSAFE has been defined centrally in common.xcconfig.<li>ALWAYS_SEARCH_USER_PATHS has been set to NO in common.xcconfig. You may need to change #include statements that were using user search path files but with syntax &quot;#include &lt;some-file&gt;&quot; and replace them with syntax &quot;#include &quot;&lt;some-header-file&gt;&quot;&quot;. This change is being done proactively as the setting ALWAYS_SEARCH_USER_PATHS is deprecated in future versions of Xcode.</ol><h2><a class="anchor" id="id_system_requirements"></a> System Requirements</h2><ul><li>For Windows development, Windows 7 SP1 is the minimum requirement.<li>For Mac development, Mac OS 10.12.6 or later is now required (Xcode 9.2 requires this).</ul><h2><a class="anchor" id="id_ide_requirements"></a> IDE Requirements</h2><h3><a class="anchor" id="vs_2017"></a> Visual Studio version is Visual Studio 2017 (15.7.4 or higher)</h3><p>When installing Visual Studio 2017, please ensure that Windows SDK 10.0.15063.0 is also installed as this is used as the base SDK for InDesign projects. Also, please add a system environment variable called VS2017INSTALLDIR and set it to the path of the VS 2017 installation folder, upto the parent folder of folders &quot;Common7&quot;, &quot;VC&quot; etc. For example, if you installed Visual Studio 2017 Enterprise edition, the value of VS2017INSTALLDIR should be C:\Program Files (x86\Microsoft Visual Studio\2017\Enterprise.<p>To update an existing Visual Studio project, the simplest method is to open the project in Visual Studio 2017 and use the prompt to update the project. In this window, please modify Windows SDK Version to 10.0.15063.0 and Platform Toolset to v141.<p>Alternatively you can modify the project file in a text editor by changing the ToolsVersion to 15.0 and PlatformToolset version to v140 and adding a new entry WindowsTargetPlatformVersion as 10.0.15063.0, as shown below.<div class="fragment"><div class="line">&lt;Project DefaultTargets=<span class="stringliteral">&quot;Build&quot;</span> ToolsVersion=<span class="stringliteral">&quot;15.0&quot;</span> xmlns=<span class="stringliteral">&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;</span>&gt;</div></div><div class="fragment"><div class="line"> &lt;PropertyGroup Label=<span class="stringliteral">&quot;Globals&quot;</span>&gt;</div><div class="line"> &lt;WindowsTargetPlatformVersion&gt;10.0.15063.0&lt;/WindowsTargetPlatformVersion&gt;</div><div class="line">&lt;/PropertyGroup&gt;</div></div><div class="fragment"><div class="line">&lt;PropertyGroup Condition=<span class="stringliteral">&quot;&#39;$(Configuration)|$(Platform)&#39;==&#39;Release|Win32&#39;&quot;</span> Label=<span class="stringliteral">&quot;Configuration&quot;</span>&gt;</div><div class="line"> &lt;ConfigurationType&gt;DynamicLibrary&lt;/ConfigurationType&gt;</div><div class="line"> &lt;PlatformToolset&gt;v141&lt;/PlatformToolset&gt;</div><div class="line"> &lt;/PropertyGroup&gt;</div><div class="line"> &lt;PropertyGroup Condition=<span class="stringliteral">&quot;&#39;$(Configuration)|$(Platform)&#39;==&#39;Debug|Win32&#39;&quot;</span> Label=<span class="stringliteral">&quot;Configuration&quot;</span>&gt;</div><div class="line"> &lt;ConfigurationType&gt;DynamicLibrary&lt;/ConfigurationType&gt;</div><div class="line"> &lt;PlatformToolset&gt;v141&lt;/PlatformToolset&gt;</div><div class="line"> &lt;/PropertyGroup&gt;</div><div class="line"> &lt;PropertyGroup Condition=<span class="stringliteral">&quot;&#39;$(Configuration)|$(Platform)&#39;==&#39;Release|x64&#39;&quot;</span> Label=<span class="stringliteral">&quot;Configuration&quot;</span>&gt;</div><div class="line"> &lt;ConfigurationType&gt;DynamicLibrary&lt;/ConfigurationType&gt;</div><div class="line"> &lt;PlatformToolset&gt;v141&lt;/PlatformToolset&gt;</div><div class="line"> &lt;/PropertyGroup&gt;</div><div class="line"> &lt;PropertyGroup Condition=<span class="stringliteral">&quot;&#39;$(Configuration)|$(Platform)&#39;==&#39;Debug|x64&#39;&quot;</span> Label=<span class="stringliteral">&quot;Configuration&quot;</span>&gt;</div><div class="line"> &lt;ConfigurationType&gt;DynamicLibrary&lt;/ConfigurationType&gt;</div><div class="line"> &lt;PlatformToolset&gt;v141&lt;/PlatformToolset&gt;</div><div class="line"> &lt;/PropertyGroup&gt;</div></div><p>Dolly has been updated to generate new projects with these settings.<p><b>Other project changes to note</b><ol type="1"><li>In previous releases, all projects inherited a setting /Zc:sizedDealloc- from Base.props. This setting has now been removed.<li>In Base.props, LanguageStandard has been set to stdcpp14 i.e. the code is compiled as C++-14 compliant.<li>BOOST_SPIRIT_THREADSAFE has been defined centrally in Base.props.</ol><p><b>IntelliSense</b><p>IntelliSense has never worked very well for InDesign code, and you may find that IntelliSense red squiggles appear under nearly every InDesign type or API, despite your project compiling successfully.<p>To disable the squiggles:<ol type="1"><li>Go to Tools &gt; Options.<li>In the options dialog, in the left pane, expand &quot;Text Editor&quot; and then expand &quot;C/C++&quot;.<li>Click on &quot;Advanced&quot; under &quot;C/C++&quot;.<li>In the right pane, scroll down until you see the &quot;IntelliSense&quot; section.<li>Select &quot;Disable Squiggles&quot; and change its value to True.<li>Click OK.</ol><h2><a class="anchor" id="id_new_apis"></a> API changes</h2><p>For a full list of API changes see the <a class="el" href="api_diffs.html">API Changes</a> page.<h1><a class="anchor" id="id_modernize_containers"></a> Multi-cycle effort to modernize InDesign native containers (since InDesign CC 2018)</h1><p>While InDesign code base is built using C++-11 now, the code does not fully leverage modern STL containers and therefore loses out on newer features introduced in C++-11. We intend to modernize our containers over multiple cycles to be able to leverage these features.<p>The approach to modernization would be to ideally replace our containers with corresponding STL containers. For example, over time, <a class="el" href="class_k2_vector.html">K2Vector</a> should be replaced by std::vector.<p>To facilitate the eventual <a class="el" href="class_k2_vector.html">K2Vector</a> migration, following changes would be made to the <a class="el" href="class_k2_vector.html">K2Vector</a> interface in InDesign CC 2018:<h2><a class="anchor" id="id_k2vector_non_std_constructor"></a> K2Vector non-standard constructor removal</h2><p><a class="el" href="class_k2_vector.html">K2Vector</a> has a non-standard explicit constructor which takes &#39;size_type n&#39; as parameter and reserves capacity for &#39;n&#39; elements, but does not construct any elements so its size remains zero. STL&#39;s std::vector has a constructor with similar signature but actually constructs &#39;n&#39; elements thereby resulting in a vector of size &#39;n&#39;. Replacing <a class="el" href="class_k2_vector.html">K2Vector</a> with std::vector without addressing this constructor would result in potential breaks in code that is using this <a class="el" href="class_k2_vector.html">K2Vector</a> constructor. Therefore we intend to remove this constructor in InDesign CC 2018, so that existing code can be ported before the switch from <a class="el" href="class_k2_vector.html">K2Vector</a> to std::vector happens. Code that uses this constructor can be ported as follows:<p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> var(10);</div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> var;</div><div class="line">var.reserve(10);</div></div><h2><a class="anchor" id="id_k2vector_location_api"></a> K2Vector deprecated API &quot;Location&quot; removal</h2><p><a class="el" href="class_k2_vector.html">K2Vector</a>&#39;s Location API has been marked deprecated for several cycles now. This API returns a value of type &#39;int32&#39;. If the element being searched for is found in the <a class="el" href="class_k2_vector.html">K2Vector</a>, then the return value is the index at which this value was found. Otherwise, the returned value is -1. Since std::vector interface does not contain this API, we need to remove this API altogether to facilitate switching to std::vector in future.<p>There are several different ways in which code currently using Location can be ported:<ul><li>Often Location API is used to check if a particular element exists or does not exist in the <a class="el" href="class_k2_vector.html">K2Vector</a>. Replacement functions K2found and K2notfound, defined in <a class="el" href="_k2_s_t_l_utilities_8h_source.html">K2STLUtilities.h</a>, can be used as replacement. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0);</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Location(testVal) == -1){} <span class="comment">//not found</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Location(testVal) &lt; 0){} <span class="comment">//not found</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Location(testVal) &gt;= 0){} <span class="comment">//found</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Location(testVal) != -1){} <span class="comment">//found</span></div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0);</div><div class="line"><span class="keywordflow">if</span> (K2notfound(myK2Vector, testVal)){} <span class="comment">//not found</span></div><div class="line"><span class="keywordflow">if</span> (K2found(myK2Vector, testVal)){} <span class="comment">//found</span></div></div><ul><li>If you want to perform an operation on the returned value or remove it from the <a class="el" href="class_k2_vector.html">K2Vector</a>, consider using iterators directly. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0), newVal(1);</div><div class="line">int32 loc = myK2Vector.Location(testVal);</div><div class="line"><span class="keywordflow">if</span> (loc != -1) <span class="comment">//found</span></div><div class="line">{</div><div class="line"> myK2Vector[loc] = newVal; <span class="comment">//change the value, or remove it as in next statement...</span></div><div class="line"> myK2Vector.erase(myK2Vector.begin() + loc);</div><div class="line">}</div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0), newVal(1);</div><div class="line"><span class="keyword">auto</span> iter = K2find(myK2Vector, testVal);</div><div class="line"><span class="keywordflow">if</span> (iter != myK2Vector.end()) <span class="comment">//found</span></div><div class="line">{</div><div class="line"> *iter = newVal; <span class="comment">//change the value, or remove it as in next statement...</span></div><div class="line"> myK2Vector.erase(iter);</div><div class="line">}</div></div><ul><li>If you do need the int32 value that used to be returned by Location API, because you need to store it or pass it to another API, replacement function K2location, defined in <a class="el" href="_k2_s_t_l_utilities_8h_source.html">K2STLUtilities.h</a>, can still be used. K2location will be removed or will undergo change in signature in future when we clean up code where int32 is used where size_type was intended. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0);</div><div class="line"><span class="keywordflow">return</span> myK2Vector.Location(testVal);</div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0);</div><div class="line"><span class="keywordflow">return</span> K2location(myK2Vector, testVal);</div></div><h2><a class="anchor" id="id_k2vector_length_api"></a> K2Vector deprecated API &quot;Length&quot; removal</h2><p><a class="el" href="class_k2_vector.html">K2Vector</a>&#39;s Length API has been marked deprecated for several cycles now. This API returns a value of type &#39;int32&#39; representing the number of elements in the <a class="el" href="class_k2_vector.html">K2Vector</a>. Standard API &quot;size&quot; already exists in the <a class="el" href="class_k2_vector.html">K2Vector</a> interface and can be used in many situations - read the porting examples below where special care needs to be taken when replacing Length with size:<ul><li>Often Length API is used to check if a <a class="el" href="class_k2_vector.html">K2Vector</a> is empty or non-empty. <a class="el" href="class_k2_vector.html">K2Vector</a> API &quot;empty&quot; can be used as a replacement for this use case. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length() == 0){} <span class="comment">//empty</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length() != 0){} <span class="comment">//non-empty</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length() &gt; 0){} <span class="comment">//non-empty</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length()){} <span class="comment">//non-empty</span></div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.empty()){} <span class="comment">//empty</span></div><div class="line"><span class="keywordflow">if</span> (!myK2Vector.empty()){} <span class="comment">//non-empty</span></div></div><ul><li>Sometimes the Length() API is actually used as a for loop condition to iterate over the entire <a class="el" href="class_k2_vector.html">K2Vector</a>. Iterators, reverse iterators and range-based for loops can be used as a replacement. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (int32 i = 0; i &lt; myK2Vector.Length(); ++i) <span class="comment">//forward iteration of entire K2Vector</span></div><div class="line">{ <span class="keyword">const</span> T &amp;val = myK2Vector[i]; }</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (int32 i = myK2Vector.Length() - 1; i &gt;= 0 ; --i) <span class="comment">//reverse iteration of entire K2Vector</span></div><div class="line">{ <span class="keyword">const</span> T &amp;val = myK2Vector[i]; }</div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = myK2Vector.begin(); iter != myK2Vector.end(); ++iter) <span class="comment">//forward iteration of entire K2Vector</span></div><div class="line">{ <span class="keyword">const</span> T &amp;val = *iter; }</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;val : myK2Vector) <span class="comment">//forward iteration of entire K2Vector using range-based for loop</span></div><div class="line">{ }</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = myK2Vector.rbegin(); iter != myK2Vector.rend(); ++iter) <span class="comment">//reverse iteration of entire K2Vector</span></div><div class="line">{ <span class="keyword">const</span> T &amp;val = *iter; }</div></div><ul><li>If the actual size is needed, use either K2Vector::size() or K2length API that is defined in K2STLUtilities. API &quot;size&quot; should be used when you know it is safe to use the unsigned return value of size API in place of the signed return value of the Length API. If a signed return value is needed, use K2length instead (see example below). K2length will be removed in future when we clean up code where int32 is used where size_type was intended.</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector, mySecondK2Vector;</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length() == mySecondK2Vector.Length()){} <span class="comment">//safe to use size()</span></div><div class="line">int32 index = -1;</div><div class="line">int32 prevSize = myK2Vector.Length(); <span class="comment">//might be safe to use size() - depends on whether the value is compared with an existing int32 or not.</span></div><div class="line"><span class="keywordflow">if</span> (index &lt; myK2Vector.Length()){} <span class="comment">//NOT safe to use size() because the value of int32, -1, will be converted to unsigned and will be greater than the size of the K2Vector.</span></div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector, mySecondK2Vector;</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.size() == mySecondK2Vector.size()){} <span class="comment">//safe to use size()</span></div><div class="line">int32 index = -1;</div><div class="line">int32 prevSize = myK2Vector.size(); <span class="comment">//might be safe to use size() - depends on whether the value is compared with an existing int32 or not.</span></div><div class="line"><span class="keywordflow">if</span> (index &lt; K2length(myK2Vector)){} <span class="comment">//NOT safe to use size() because the value of int32, -1, will be converted to unsigned and will be greater than the size of the K2Vector.</span></div></div><h1><a class="anchor" id="id_spectrum_ui_in_indesign"></a> Spectrum UI in InDesign (since InDesign CC 2017.1)</h1><p>The overall theme of Spectrum UI is to bring a consistency in Adobe products&acirc;&#128;&#153; UI and give these products a flat modern look. The major effort in this work is to remove bevels and embossing in the UI.<h2><a class="anchor" id="id_spectrum_plugin_changes"></a> Changes needed to get Spectrum UI in plug-ins</h2><p>Ideally, no changes should be needed. API signatures have not been modified in this UI modernization so existing plug-ins should automatically get UI appearance consistent to InDesign, if no custom drawing has been done for any widget i.e. following API has not been implemented:<div class="fragment"><div class="line"><a class="code" href="class_i_control_view.html#aec14fd20f70d44b1b43df9c47458ce24">IControlView::Draw</a>(<a class="code" href="class_i_view_port.html">IViewPort</a>* viewPort, SysRgn updateRgn = nil)</div></div><p>or following API has not been overridden:<div class="fragment"><div class="line"><a class="code" href="class_d_v_hosted_widget_view.html">DVHostedWidgetView</a>::(dvaui::drawbot::Drawbot* drawbotP)</div></div><p>If custom drawing has been done using any of the above APIs, some rework may be needed depending on the type of customization done. An example of customization that was done by InDesign team was bevels. Bevel is a combination of highlight and shadow. We chose to replace it with a uniform border wherever it appeared. Another major change that we made was changing few icons as they did not have a flat appearance. This is an optional change for plug-in developers. If the currently used icons look inconsistent with the rest of the UI, they may be modified to match colors and flatter appearance. In such a situation, the plug-in will need recompilation.<h2><a class="anchor" id="id_spectrum_api_behavior_changes"></a> Changes in API behavior</h2><ul><li>Owner drawn dropdowns: The width of the owner drawn dropdowns has been limited to a minimum value of kCC2016OwnerDrawDDItemMinWidth and maximum kCC2016OwnerDrawDDItemMaxWidth. These constants and other useful constants have been defined in <a class="el" href="_std_height_width_constants_8h_source.html">StdHeightWidthConstants.h</a> header file.</ul><ul><li>SetDrawListWidgetEndLine() API: The drawing of end line has been disabled from the scroller widget and SetDrawListWidgetEndLine() API has been marked deprecated. Drawing of end line via scroller widget in the list tree is not required as it is already being done while drawing the node separator for the last node. Users can set/reset the drawing of endline via the &acirc;&#128;&#156;kDrawEndLine&acirc;&#128;&#157; attribute in the &acirc;&#128;&#156;fr&acirc;&#128;&#157; as while drawing node separator &acirc;&#128;&#156;kDrawEndLine&acirc;&#128;&#157; attribute is queried and decision to draw the endline is made on the basis of its value.</ul><ul><li>Widgets added for Spectrum in Widgets.fh</ul><ol type="1"><li>GenericPanelWithCustomBorderWidget: This widget is defined to have a configurable sides which should be drawn around the child widget. This is an extension to GenericPanelWithBorderWidget with additional information for sides to be drawn and the corner radius, if it is going to have rounded corners.</ol><p>Parameters for GenericPanelWithCustomBorderWidget : Other than the parameters used by GenericPanelWithBorderWidget, the following parameters are needed:<ul><li>The sides to be drawn: The constants kAllBorder, kLeftBorder, kRightBorder, kTopBorder, kBottomBorder are defined in <a class="el" href="_std_height_width_constants_8h_source.html">StdHeightWidthConstants.h</a> . If you have specified a corner radius to be used which is greater than 0, the border will be drawn with the specified sides and the corners made by those edges will have the corner radius specified.<li>The corner radius: Use the corner radius if you want the corners to be rounded. If the corner radius specified is less than or equal to 0, the corners will not be rounded.</ul><ol type="1"><li>CSliderWidget: This can be used to create slider like widgets. The following parameters are read from the fr file:</ol><ul><li>CControlView: The <a class="el" href="class_i_control_view.html">IControlView</a> description of the slider.<li>CSliderControlData: The minimum, maximum, and initial value of the slider. These values should be specified as double e.g. 0.0, 100.0, 50.0 will set the minimum, maximum, and initial value of the slider.<li>CSliderTickCount: The number of ticks to show on the slider. Generally, the minimum and maximum slider values are divided into equal parts to get the numbers of ticks. If number of ticks specified &lt; 2, it will be ignored to have no ticks.</ul><p>Any change in the value of the slider value is broadcast on <a class="el" href="class_i_subject.html">ISubject</a> interface of this widget with ClassID as kRealChangeStateMessage. </div></div></div><div class="navpath" id="nav-path"><ul><li class="footer">Generated on Sat Sep 22 2018 10:53:01 for InDesign SDK by <a href="http://www.doxygen.org/index.html"> <img alt="doxygen" class="footer" src="doxygen.png" /></a> 1.8.3.1 </ul></div></body></html>
