<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/xhtml;charset=UTF-8" http-equiv="Content-Type" /><meta content="IE=9" http-equiv="X-UA-Compatible" /><meta content="Doxygen 1.8.3.1" name="generator" /><title>_c_view_interface</title><link href="tabs.css" rel="stylesheet" type="text/css" /><script src="jquery.js" type="text/javascript"></script><script src="dynsections.js" type="text/javascript"></script><link href="navtree.css" rel="stylesheet" type="text/css" /><script src="resize.js" type="text/javascript"></script><script src="navtree.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(initResizable);

  $(window).load(resizeHeight);

</script><link href="search/search.css" rel="stylesheet" type="text/css" /><script src="search/search.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(function() { searchBox.OnSelectItem(0); });

</script><link href="doxygen.css" rel="stylesheet" type="text/css" /></head><body><div id="top"><div id="titlearea"><table cellpadding="0" cellspacing="0"><tbody><tr style="height: 56px;"><td id="projectlogo"><img alt="Logo" src="adobe_logo.png" /></td><td style="padding-left: 0.5em;"><div id="projectname">InDesign SDK &nbsp;<span id="projectnumber">14.0.0</span></div></td></tr></tbody></table></div><script type="text/javascript">

var searchBox = new SearchBox("searchBox", "search",false,'Search');

</script><div class="tabs" id="navrow1"><ul class="tablist"><li><a href="index.html"><span>InDesign&nbsp;SDK</span></a><li><a href="pages.html"><span>Documentation</span></a><li><a href="group__bosses__parent.html"><span>Bosses</span></a><li><a href="group__sdk.html"><span>Sample&nbsp;plug-ins</span></a><li><a href="classes.html"><span>Class&nbsp;Index</span></a><li><div class="MSearchBoxInactive" id="MSearchBox"><span class="left"> <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png" /> <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search" /> </span><span class="right"> <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png" /></a> </span></div></ul></div></div><div class="ui-resizable side-nav-resizable" id="side-nav"><div id="nav-tree"><div id="nav-tree-contents"><div class="sync" id="nav-sync"></div></div></div><div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;"></div></div><script type="text/javascript">

$(document).ready(function(){initNavTree('class_c_view_interface.html','');});

</script><div id="doc-content"><div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()"><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Pages</a></div><div id="MSearchResultsWindow"><iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)"></iframe></div><div class="header"><div class="summary"><a href="#pub-methods">Public Member Functions</a> | <a href="#pub-attribs">Public Attributes</a> | <a href="#pro-methods">Protected Member Functions</a> | <a href="#pro-attribs">Protected Attributes</a> | <a href="class_c_view_interface-members.html">List of all members</a></div><div class="headertitle"><div class="title">CViewInterface&lt; Interface &gt; Class Template Reference</div></div></div><div class="contents"><p><code>#include &lt;<a class="el" href="_c_view_interface_8h_source.html">CViewInterface.h</a>&gt;</code><div class="dynheader"> Inheritance diagram for CViewInterface&lt; Interface &gt;:</div><div class="dyncontent"><div class="center"><img alt="" src="class_c_view_interface.png" usemap="#CViewInterface&lt; Interface &gt;_map" /><map id="CViewInterface&lt; Interface &gt;_map" name="CViewInterface&lt; Interface &gt;_map"></map></div></div><table class="memberdecls"><tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a> Public Member Functions</h2></td></tr><tr class="memitem:a9630f0ce415bf705ff8df75b6730982e"><td align="right" class="memItemLeft" valign="top"><a class="el" href="class_i_p_m_unknown.html">IPMUnknown</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_view_interface.html#a9630f0ce415bf705ff8df75b6730982e">QueryInterface</a> (<a class="el" href="class_i_d_type.html">PMIID</a> interfaceID) const </td></tr><tr class="separator:a9630f0ce415bf705ff8df75b6730982e"><td class="memSeparator" colspan="2">&nbsp;</td></tr><tr class="memitem:a0769963cf95d4a7b799b0accb0e6c0e7"><td align="right" class="memItemLeft" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_view_interface.html#a0769963cf95d4a7b799b0accb0e6c0e7">AddRef</a> () const </td></tr><tr class="separator:a0769963cf95d4a7b799b0accb0e6c0e7"><td class="memSeparator" colspan="2">&nbsp;</td></tr><tr class="memitem:adda50cf9ccf20427dba4cd411f54d854"><td align="right" class="memItemLeft" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_view_interface.html#adda50cf9ccf20427dba4cd411f54d854">Release</a> () const </td></tr><tr class="separator:adda50cf9ccf20427dba4cd411f54d854"><td class="memSeparator" colspan="2">&nbsp;</td></tr><tr class="memitem:ab6617f6ce245fa9139cac703d34b48b7"><td align="right" class="memItemLeft" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_view_interface.html#ab6617f6ce245fa9139cac703d34b48b7">PreDirty</a> (<a class="el" href="class_i_d_type.html">ImplementationID</a> prop=kInvalidImpl, bool16 allowModification=kTrue)</td></tr><tr class="separator:ab6617f6ce245fa9139cac703d34b48b7"><td class="memSeparator" colspan="2">&nbsp;</td></tr></table><table class="memberdecls"><tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a> Public Attributes</h2></td></tr><tr class="memitem:a36fbea17d6bb707afa9737f0609cfab6"><td align="right" class="memItemLeft" valign="top"><a class="anchor" id="a36fbea17d6bb707afa9737f0609cfab6"></a> void *&nbsp;</td><td class="memItemRight" valign="bottom"><b>fViewIFaceConsistencyChecker</b></td></tr><tr class="separator:a36fbea17d6bb707afa9737f0609cfab6"><td class="memSeparator" colspan="2">&nbsp;</td></tr></table><table class="memberdecls"><tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a> Protected Member Functions</h2></td></tr><tr class="memitem:a982a2aaf0edb2d30856d7be5ec695479"><td align="right" class="memItemLeft" valign="top"><a class="anchor" id="a982a2aaf0edb2d30856d7be5ec695479"></a> &nbsp;</td><td class="memItemRight" valign="bottom"><b>CViewInterface</b> (<a class="el" href="class_i_p_m_unknown.html">IPMUnknown</a> *boss)</td></tr><tr class="separator:a982a2aaf0edb2d30856d7be5ec695479"><td class="memSeparator" colspan="2">&nbsp;</td></tr></table><table class="memberdecls"><tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a> Protected Attributes</h2></td></tr><tr class="memitem:a5cf092f8318a1d386290df4e49b4aa99"><td align="right" class="memItemLeft" valign="top"><a class="anchor" id="a5cf092f8318a1d386290df4e49b4aa99"></a> <a class="el" href="class_helper_interface.html">HelperInterface</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>fHelperInterface</b></td></tr><tr class="separator:a5cf092f8318a1d386290df4e49b4aa99"><td class="memSeparator" colspan="2">&nbsp;</td></tr></table><a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2><div class="textblock"><h3>template&lt;class Interface&gt;<br /> class CViewInterface&lt; Interface &gt;</h3><p>Base class for snapshot view interfaces. Use of snapshot view interfaces is extremely rare in the application codebase. They should only be used if absolutely necessary. For example, <a class="el" href="class_i_layout_control_data.html">ILayoutControlData</a> on the layout widget is a snapshot view interface. The data in this interface is depended on by many other objects and must be kept in tight synchronisation with the database at all times.<p>Background:<p>Suppose that you have a user interface object such as a widget that has data that depends on model objects that persist in a database that supports undo and your data needs to be updated when the model objects it depends on are modified, or when modifications are undone or redone. You have concluded that you cannot use lazy notification to update your data because it must be kept up to date with changes to the model at all times.<p>The state of a snapshot view interface is snapshot before it is changed, reverted on undo and restored on redo. It is very similar to a snapshot interface. The distinction is that the database a snapshot interface is associated with is fixed and is implicitly defined by the persistent boss it is aggregated on. A snapshot view interface on the other hand, is part of a user interface object and must explicitly identify the database containing the model objects it depends on. Also, it is not fixed to be one specific database. For example, a widget that tracks some state in the front document must change the target database when the front document changes.<p>To implement a snapshot view interface:<ol type="1"><li>Aggregate IID_IVIEWOBJECTCHANGES on the user interface boss class and use the implementation, kViewObjectChangesImpl, provided by the API.</ol><ol type="1"><li>Aggregate your snapshot view interface on the user interface boss class.</ol><ol type="1"><li>Provide an abstract interface for your snapshot view interface that uses <a class="el" href="class_i_p_m_unknown.html">IPMUnknown</a> as a base class, IYourViewableInterface for example.</ol><ol type="1"><li>Provide an implementation of this IYourViewableInterface using the templated class <a class="el" href="class_c_view_interface.html">CViewInterface</a>. For example: class YourViewableInterface : public CViewInterface&lt;IYourViewableInterface&gt;</ol><ol type="1"><li>Use CREATE_VIEW_PMINTERFACE to make your implementation class available to the</ol><ol type="1"><li>Define a SnapshotReadWrite method for your implementation class, it gets called to serialize snapshots of your data when needed.</ol><ol type="1"><li>Call PreDirty within mutator methods before changing member variables that you serialize in SnapshotReadWrite.</ol><ol type="1"><li>When the model objects you depend on are changed call mutator methods to modify the state of your interface. The application takes a snapshot of your interface, reverts the state on undo and restores it on redo.</ol><ol type="1"><li>When your Reset method is called forcibly rebuild the data in the interface. For example, imagine a panel that has a snapshot view interface that tracks data from the front document. Consider performing a set of operations on a document with a panel closed. When the panel opens it refreshes and displays information from the front document. As the document is modified by subsequent operations the snapshot view interface tracks the changes. If the user performs undo on the document, to a point prior to when the panel was opened, a mechanism is required to forcibly rebuild the data in the snapshot view interface. The Reset method provides that functionality.</ol><ol type="1"><li>Make sure the target database is set by calling <a class="el" href="class_i_view_object_changes.html#a7bbaebe88198d11f2f6bd5e53fc609db">IViewObjectChanges::SetTargetDB</a> on the interface that resides on the same boss.</ol><dl class="section see"><dt>See Also<dd><a class="el" href="class_i_view_object_changes.html">IViewObjectChanges</a></dl></div><h2 class="groupheader">Member Function Documentation</h2><a class="anchor" id="a0769963cf95d4a7b799b0accb0e6c0e7"></a><div class="memitem"><div class="memproto"><div class="memtemplate"> template&lt;class Interface &gt; </div><table class="memname"><tr><td class="memname">void <a class="el" href="class_c_view_interface.html">CViewInterface</a>&lt; Interface &gt;::AddRef </td><td>(</td><td class="paramname"></td><td>)</td><td> const</td></tr></table></div><div class="memdoc"><dl class="section see"><dt>See Also<dd><a class="el" href="class_i_p_m_unknown.html#aa90872f1896d2f2623cbb6f0bff98443">IPMUnknown::AddRef()</a></dl></div></div><a class="anchor" id="ab6617f6ce245fa9139cac703d34b48b7"></a><div class="memitem"><div class="memproto"><div class="memtemplate"> template&lt;class Interface &gt; </div><table class="memname"><tr><td class="memname">void <a class="el" href="class_c_view_interface.html">CViewInterface</a>&lt; Interface &gt;::PreDirty </td><td>(</td><td class="paramtype"><a class="el" href="class_i_d_type.html">ImplementationID</a>&nbsp;</td><td class="paramname"><em>prop</em> = <code>kInvalidImpl</code>, </td></tr><tr><td class="paramkey"></td><td></td><td class="paramtype">bool16&nbsp;</td><td class="paramname"><em>allowModification</em> = <code>kTrue</code>&nbsp;</td></tr><tr><td></td><td>)</td><td></td><td></td></tr></table></div><div class="memdoc"><p>For internal use <dl class="params"><dt>Parameters<dd><table class="params"><tr><td class="paramname">prop</td><td></td></tr><tr><td class="paramname">allowModification</td><td></td></tr></table></dl></div></div><a class="anchor" id="a9630f0ce415bf705ff8df75b6730982e"></a><div class="memitem"><div class="memproto"><div class="memtemplate"> template&lt;class Interface &gt; </div><table class="memname"><tr><td class="memname"><a class="el" href="class_i_p_m_unknown.html">IPMUnknown</a> * <a class="el" href="class_c_view_interface.html">CViewInterface</a>&lt; Interface &gt;::QueryInterface </td><td>(</td><td class="paramtype"><a class="el" href="class_i_d_type.html">PMIID</a>&nbsp;</td><td class="paramname"><em>interfaceID</em></td><td>)</td><td> const</td></tr></table></div><div class="memdoc"><dl class="section see"><dt>See Also<dd><a class="el" href="class_i_p_m_unknown.html#aaa3b657383c4699900aaec5dc7348864">IPMUnknown::QueryInterface()</a></dl></div></div><a class="anchor" id="adda50cf9ccf20427dba4cd411f54d854"></a><div class="memitem"><div class="memproto"><div class="memtemplate"> template&lt;class Interface &gt; </div><table class="memname"><tr><td class="memname">void <a class="el" href="class_c_view_interface.html">CViewInterface</a>&lt; Interface &gt;::Release </td><td>(</td><td class="paramname"></td><td>)</td><td> const</td></tr></table></div><div class="memdoc"><dl class="section see"><dt>See Also<dd><a class="el" href="class_i_p_m_unknown.html#a9365365afb903ae6a6450593930a0f9c">IPMUnknown::Release()</a></dl></div></div></div></div><div class="navpath" id="nav-path"><ul><li class="navelem"><a class="el" href="class_c_view_interface.html">CViewInterface</a><li class="footer">Generated on Sat Sep 22 2018 10:53:33 for InDesign SDK by <a href="http://www.doxygen.org/index.html"> <img alt="doxygen" class="footer" src="doxygen.png" /></a> 1.8.3.1 </ul></div></body></html>
